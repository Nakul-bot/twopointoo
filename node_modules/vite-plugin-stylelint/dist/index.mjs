import {createRequire} from 'module';var require=createRequire(import.meta.url);
var D=Object.create;var O=Object.defineProperty;var G=Object.getOwnPropertyDescriptor;var J=Object.getOwnPropertyNames;var K=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var L=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,l)=>(typeof require!="undefined"?require:t)[l]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var Q=(e,t,l,c)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of J(t))!N.call(e,i)&&i!==l&&O(e,i,{get:()=>t[i],enumerable:!(c=G(t,i))||c.enumerable});return e};var o=(e,t,l)=>(l=e!=null?D(K(e)):{},Q(t||!e||!e.__esModule?O(l,"default",{value:e,enumerable:!0}):l,e));import{createFilter as R,normalizePath as U}from"@rollup/pluginutils";import X from"node:fs";import Y from"node:path";function Z(e={}){var h,P,S,w,E,v,b,W,x,A;let t=(h=e==null?void 0:e.cache)!=null?h:!0,l=(P=e==null?void 0:e.cacheLocation)!=null?P:Y.join("node_modules",".vite","vite-plugin-stylelint"),c=(S=e==null?void 0:e.include)!=null?S:["src/**/*.css","src/**/*.scss","src/**/*.sass","src/**/*.less","src/**/*.styl","src/**/*.vue","src/**/*.svelte"],i=(w=e==null?void 0:e.exclude)!=null?w:["node_modules","virtual:"],V=(E=e==null?void 0:e.stylelintPath)!=null?E:"stylelint",_=(v=e==null?void 0:e.lintOnStart)!=null?v:!1,j=(b=e==null?void 0:e.emitError)!=null?b:!0,C=(W=e==null?void 0:e.emitErrorAsWarning)!=null?W:!1,$=(x=e==null?void 0:e.emitWarning)!=null?x:!0,k=(A=e==null?void 0:e.emitWarningAsError)!=null?A:!1,z=R(c,i),H=s=>!X.existsSync(s),y,d;return{name:"vite:stylelint",async buildStart(){var s;if(!y)try{y=(await Promise.resolve().then(()=>o(L(V)))).default,d=async(r,I)=>await y.lint({...e,allowEmptyInput:!0,cache:t,cacheLocation:l,files:I}).then(n=>{if(!n)return;let{results:u}=n;u.forEach(M=>{let{warnings:T,ignored:q}=M;q||T.forEach(B=>{console.log("");let{severity:F,text:m,line:f,column:g}=B;F==="error"&&j?C?r.warn(m,{line:f,column:g}):r.error(m,{line:f,column:g}):F==="warning"&&$&&(k?r.error(m,{line:f,column:g}):r.warn(m,{line:f,column:g}))})})}).catch(n=>{var u;console.log(""),r.error(`${(u=n==null?void 0:n.message)!=null?u:n}`)})}catch(a){console.log(""),this.error(`${(s=a==null?void 0:a.message)!=null?s:"Failed to import Stylelint. Have you installed and configured correctly?"}`)}_&&(console.log(""),this.warn("Stylelint is linting all files in the project because `lintOnStart` is true. This will significantly slow down Vite."),await d(this,c))},async transform(s,a){let r=U(a).split("?")[0];return!z(r)||H(r)||await d(this,r),null}}}export{Z as default};
